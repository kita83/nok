nok

🚧 このプロジェクトは現在アクティブに開発中であり、本番環境での使用にはまだ適していません。

nok は、分散型チームがCLI（コマンドライン）から「今ここにいる」感覚を得られるようにする、ミニマリストなターミナルベースのバーチャルオフィスツールです。ドアをノックするというシンプルな行為にインスパイアされており、リモートファーストのチームに、存在感の共有とリアルタイムなコミュニケーションを穏やかな「コンコン」と共に届けます。

⚙️ 主な機能
	•	ターミナルUI (TUI)：ratatuiを使用した軽量でレトロな雰囲気。開発者のワークフローに自然に溶け込む
	•	ノック通知機能：他のメンバーにさりげなく「ノック」（音＋ASCIIアニメーション）を送信
	•	プレゼンスインジケーター：誰が利用可能か、離席中か、オフラインかをリアルタイムに表示
	•	クイックコマンド：nok @user — 直感的で高速な操作
	•	タブ切り替え：r（ルーム）、u（ユーザー）、c（チャット）キーでビューを切り替え
	•	音声読み上げ：TTS（テキスト読み上げ）機能でメッセージを音声出力 — チャットとカジュアルな音声コミュニケーションの架け橋に
	•	コマンドモード：iキーでコマンドモードに入り、メッセージ送信やルーム参加などを実行可能
	•	ユーザー設定：ユーザー名変更や設定の永続化に対応
	•	マルチプロセス対応：別プロセスで起動してもユーザーが適切に管理される

🆔 ユーザー管理

nokでは、各ユーザーに一意のIDが割り当てられ、設定ファイルで永続化されます：

**設定ファイルの場所**：`~/.config/nok/config.json`

**自動生成される内容**：
```json
{
  "user_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "username": "your_system_username",
  "last_server_url": "ws://localhost:8001"
}
```

**別プロセスでの起動**：
- 初回起動時にシステムユーザー名をデフォルトとしてユーザーが作成される
- 同じマシンで複数回起動しても同じユーザーIDが使われる
- ユーザー名を変更しても一意性が保たれる

⚙️ 設定機能

**設定画面の起動**：`s`キーを押す

**設定項目**：
- ユーザー名の変更
- 変更は即座に設定ファイルに保存される
- サーバーに反映するには再接続が必要（F5キー）

オーディオ

audioモジュールは rodio ライブラリを使って効果音を再生します。主な機能：
	•	ノック音の再生
	•	受信メッセージのTTS（テキスト読み上げ）オプション

使い方

# バックエンドの起動
cd backend && uv run python main.py

# フロントエンドの起動（別ターミナルで）
cargo run

# 基本操作
s            # 設定画面を開く
Tab          # フォーカスを切り替え
↑↓           # リスト内でナビゲート
n            # ノック送信（ユーザー選択時）
F5           # サーバーに再接続
q            # アプリを終了

# コマンドモード（iキーで入力モード）
nok @username    # 指定ユーザーのドアをノック
/join room_name  # 他のルームに参加
/status away     # ステータスを「離席中」に変更
/help            # ヘルプを表示

🔧 マルチプロセステスト

別プロセスでの動作確認方法：

```bash
# ターミナル1
cargo run

# ターミナル2（同時に）
cargo run

# 動作確認
# 1. 各プロセスで異なるユーザー名に設定（sキー）
# 2. F5キーで再接続
# 3. お互いが「Users」ペインに表示されることを確認
# 4. nキーでノックを送り合って確認
```

開発

# プロジェクトのビルド
cargo build

# テストの実行
cargo test

ライセンス

MITライセンス
